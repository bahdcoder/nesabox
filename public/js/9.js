(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"8bDB":function(t,e,a){"use strict";a.r(e);function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var n={data:function(){return{table:{headers:[{label:"Name",value:"name"},{label:"",value:"actions"}]},membershipsTable:{headers:[{label:"Team name",value:"team_name"},{label:"Status",value:"status"},{label:"",value:"actions"}]},form:{name:""}}},computed:{subscription:function(){return this.$root.auth.subscription},teams:function(){return this.$root.auth.teams},memberships:function(){return this.$root.auth.team_memberships.map((function(t){return function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},t,{team_name:t.team.name})}))}},mounted:function(){this.initializeForm("/api/teams")},methods:{submit:function(){var t=this;this.submitForm().then((function(e){t.$root.auth=e,t.form={name:""},t.$root.flashMessage("Team has been added.")})).catch((function(e){var a=e.response;t.$root.flashMessage(a.data.message||"Failed creating team.","error")}))},acceptInvite:function(t){this.updateInvite(t,"accepted")},rejectInvite:function(t){this.updateInvite(t,"rejected")},updateInvite:function(t,e){var a=this;axios.patch("/api/invites/".concat(t.id,"/").concat(e)).then((function(t){var e=t.data;a.$root.auth=e})).catch((function(t){a.$root.flashMessage(t.response.data.message||"Failed to update invite.")}))}}},o=a("KHd+"),i=Object(o.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("account-layout",[a("template",{slot:"content"},[a("flash"),t._v(" "),"business"!==t.subscription.plan?a("card",{staticClass:"mb-5",attrs:{title:"Upgrade your plan to add teams"}},[a("v-button",{attrs:{label:"Upgrade to Business",component:"router-link",to:"/account/subscription"}})],1):a("div",[a("card",{staticClass:"mb-5",attrs:{title:"Add new team"}},[a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("text-input",{attrs:{name:"name",label:"Name",placeholder:"Artisans",errors:t.formErrors.name,help:"Provide a name for your team."},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),a("v-button",{staticClass:"mt-5",attrs:{type:"submit",label:"Add team",loading:t.submitting}})],1)]),t._v(" "),a("card",{staticClass:"mb-5",attrs:{table:!0,title:"Teams",rowsCount:t.teams.length,emptyTableMessage:"No teams yet."}},[a("v-table",{attrs:{headers:t.table.headers,rows:t.teams},scopedSlots:t._u([{key:"row",fn:function(e){var s=e.row,r=e.header;return["name"===r.value?a("span",{staticClass:"text-gray-800"},[t._v(t._s(s[r.value]))]):t._e(),t._v(" "),"actions"===r.value?a("div",{staticClass:"flex items-center"},[a("router-link",{staticClass:"mr-5 text-sha-green-500",staticStyle:{"text-decoration":"underline"},attrs:{to:{name:"account.team.team-id",params:{id:s.id}}}},[t._v("\n                                "+t._s(s.invites.length)+" Member"+t._s(1===s.invites.length?"":"s")+"\n                            ")]),t._v(" "),a("button",{staticClass:"border-2 border-blue-500 p-1 rounded hover:bg-blue-100 shadow mr-3",attrs:{type:"button"}},[a("svg",{staticClass:"text-blue-500",attrs:{width:"20",height:"20",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"}})])]),t._v(" "),a("delete-button")],1):t._e()]}}])})],1)],1),t._v(" "),a("card",{attrs:{title:"Team memberships",table:!0,rowsCount:t.memberships.length,emptyTableMessage:"You have not been added to any teams."}},[a("v-table",{attrs:{headers:t.membershipsTable.headers,rows:t.memberships},scopedSlots:t._u([{key:"row",fn:function(e){var s=e.row,r=e.header;return["team_name"===r.value?a("span",{staticClass:"text-gray-800"},[t._v(t._s(s[r.value]))]):t._e(),t._v(" "),"status"===r.value?a("table-status",{attrs:{status:s.status}}):t._e(),t._v(" "),"actions"===r.value&&"active"!==s.status?a("div",{staticClass:"flex items-center"},[a("button",{staticClass:"border-2 border-sha-green-500 p-1 rounded hover:bg-sha-green-100 shadow mr-3",attrs:{type:"button"},on:{click:function(e){return t.acceptInvite(s)}}},[a("svg",{staticClass:"text-sha-green-500",attrs:{width:"20",height:"20",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}})])]),t._v(" "),a("delete-button",{on:{click:function(e){return t.rejectInvite(s)}}})],1):t._e()]}}])})],1)],1)],2)}),[],!1,null,null,null);e.default=i.exports}}]);