(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{BkWi:function(e,t,r){"use strict";r.r(t);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a={data:function(){return{projectTypes:[{label:"Static HTML",value:"html"},{label:"Nodejs",value:"nodejs"}],form:{directory:"/",type:"nodejs",name:""},table:{headers:[{label:"Domain",value:"name"},{label:"Repository",value:"repository"},{label:"Type",value:"type"},{label:"Status",value:"status"}],loadBalancerHeaders:[{label:"Domain",value:"name"},{label:"Status",value:"status"}]}}},mounted:function(){this.initializeForm("/api/servers/".concat(this.serverId,"/sites"))},methods:{submit:function(){var e=this;this.submitForm().then((function(t){e.form={directory:"/",type:"nodejs",name:""},e.$root.servers=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.$root.servers,o({},t.id,t))}))},routeToSite:function(e){"active"===e.status&&this.$router.push("/servers/".concat(this.serverId,"/sites/").concat(e.id))}},computed:{serverId:function(){return this.$route.params.server},server:function(){return this.$root.servers[this.serverId]},sites:function(){return this.server?this.$root.servers[this.serverId].sites:[]}}},i=r("KHd+"),n=Object(i.a)(a,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("server-layout",[r("template",{slot:"content"},[r("card",{staticClass:"mb-4 md:mb-8",attrs:{title:"New Site"}},[r("flash"),e._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[r("div",{staticClass:"w-full mt-5"},[r("text-input",{attrs:{name:"domain",label:"Root domain",errors:e.formErrors.name,placeholder:"www.example.com",help:"You can host multiple sites on a server. To add a new site, provide the domain name the site would be hosted on."},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),e.server&&"load_balancer"!==e.server.type?r("div",{staticClass:"w-full mt-5"},[r("select-input",{attrs:{name:"type",label:"Project type",options:e.projectTypes,errors:e.formErrors.type,placeholder:"www.example.com",help:"If your project is a Single Page application, static html site or related, select Static HTML. Select Nodejs for a standard Nodejs application."},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1):e._e(),e._v(" "),e.server&&"load_balancer"!==e.server.type?r("div",{staticClass:"w-full mt-5"},[r("text-input",{attrs:{name:"directory",placeholder:"/dist",label:"Web directory",errors:e.formErrors.directory,help:"If your app builds into a sub directory such as /dist or /build, set the web root to the build directory. The Nginx configuration will point to it."},model:{value:e.form.directory,callback:function(t){e.$set(e.form,"directory",t)},expression:"form.directory"}})],1):e._e(),e._v(" "),r("div",{staticClass:"flex justify-end w-full w-full mt-5"},[r("v-button",{staticClass:"w-full md:w-1/5",attrs:{type:"submit",label:"Add site",disabled:e.submitting}})],1)])],1),e._v(" "),r("card",{attrs:{title:"Active Sites",rowsCount:e.sites.length,table:!0,emptyTableMessage:"No sites on this server yet."}},[r("v-table",{attrs:{rows:e.sites,headers:e.server&&"load_balancer"===e.server.type?e.table.loadBalancerHeaders:e.table.headers},on:{"row-clicked":e.routeToSite},scopedSlots:e._u([{key:"row",fn:function(t){var s=t.row,o=t.header;return["name"===o.value?r("span",{staticClass:"text-gray-800 text-sm"},[e._v("\n                        "+e._s(s.name)+"\n                    ")]):e._e(),e._v(" "),"type"===o.value?r("span",{staticClass:"text-gray-800 text-sm capitalize"},[e._v("\n                        "+e._s(s.type)+"\n                    ")]):e._e(),e._v(" "),"status"===o.value?r("table-status",{attrs:{status:s.status}}):e._e(),e._v(" "),"repository"===o.value?r("div",{staticClass:"flex "},[s.repository?e._e():r("svg",{staticClass:"mr-3",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"M10 14L12 12M12 12L14 10M12 12L10 10M12 12L14 14M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"#4A5568","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})]),e._v("\n                        "+e._s(s.repository||"None")+"\n                    ")]):e._e()]}}])})],1)],1)],2)}),[],!1,null,null,null);t.default=n.exports}}]);